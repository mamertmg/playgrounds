<% layout('layouts/boilerplate', { pageTitle: 'Signup' })%>
<div class="row mt-5">
    <div class="col-md-6 m-auto">
      <div class="card card-body">
        <h1 class="text-center mb-3"><i class="fas fa-user-plus"></i> Signup</h1>
        <%- partial('./shared/partials/flash')%>
        <form class="validated-form" action="/signup" method="POST" novalidate>
          <input type="hidden" name="_csrf" value="<%= csrftoken %>"/>
          <div class="form-group">
            <label class="my-1" for="name">Name</label>
            <input
              type="name"
              id="name"
              name="name"
              class="form-control"
              placeholder="Enter Name"
              value="<%= typeof name != 'undefined' ? name : '' %>"
              required
            />
            <div class="invalid-feedback">Please enter a username!</div>
          </div>
          <div class="form-group my-2">
            <label class="my-1" for="email">Email</label>
            <input
              type="email"
              id="email"
              name="email"
              class="form-control"
              placeholder="Enter Email"
              value="<%= typeof email != 'undefined' ? email : '' %>"
              required
            />
            <div class="invalid-feedback">Please enter a valid email address!</div>
          </div>
          <div class="form-group my-2">
            <label class="my-1" for="password">Password</label>
            <input
              type="password"
              id="password"
              name="password"
              class="form-control"
              placeholder="Create Password"
              minlength="6"
              value="<%= typeof password != 'undefined' ? password : '' %>"
              required
              
            />
            <div class="invalid-feedback">Password must contain at least six characters!</div>
          </div>
          <div class="form-group my-2">
            <label class="my-1" for="password2">Confirm Password</label>
            <input
              type="password"
              id="password2"
              name="password2"
              class="form-control"
              placeholder="Confirm Password"
              value="<%= typeof password2 != 'undefined' ? password2 : '' %>"
              required
              minlength="6"
            />
            <div class="invalid-feedback">Password must contain at least six characters!</div>
          </div>
          <button type="submit" class="btn btn-block mt-3">
            Signup
          </button>
        </form>
        <p class="lead mt-4">Have An Account? <a class="mintlink" href="login">Login</a></p>
      </div>
    </div>
  </div>

  <script>// for disabling form submissions if there are invalid fields
    (function () {
        'use strict';
    
        // Fetch all the forms we want to apply custom Bootstrap validation styles to
        const forms = document.querySelectorAll('.validated-form');
    
        // Loop over them and prevent submission
        Array.from(forms).forEach(function (form) {
            form.addEventListener(
                'submit',
                function (event) {
                    if (!form.checkValidity()) {
                        event.preventDefault();
                        event.stopPropagation();
                    }
                    form.classList.add('was-validated');
                },
                false
            );
        });
    })();</script>